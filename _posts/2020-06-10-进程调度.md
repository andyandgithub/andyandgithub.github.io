---
title: 进程调度
categories: study
tags : 操作系统复习
toc: true
---
# 调度类型

> 调度算法 根据系统的资源分配策略所规定的资源分配算法

 - ①作业调度（高级调度）High Scheduling 
 - ②进程调度（低级调度） Low -Level  
 - ③中级调度 （支持对换功能的调度）		Intermediate-Level Scheduling
## 调度队列模型
 - 1)仅有进程调度的调度队列模型。
 - 2)具有作业调度和进程调度的调度队列模型。
 - 3)同时具有三级调度的调度队列模型。
作业调度：从后备作业队列的多个作业中选择一个或部分作业进入内存的算法
进程调度：从多个就绪进程中选择一个或几个进程并为其分配CPU的算法
## 调度原则
面向用户的准则
    (1) 周转时间短
    (2) 响应时间快
    (3) 截止时间的保证
面向系统的准则
    (1) 系统吞吐量高
    (2) 处理机利用率高
# 调度算法
## 先来先服务调度算法FCFS
FCFS就是从就绪队列的队首，选择最先到达队列的进程，为该进程分配CPU
### FCFS性能
FCFS适合长作业，不利于短作业，短作业等待时间太长不合算。FCFS使短作业的周转时间过长。FCFS有利于CPU繁忙型作业(如科学计算)不利于I/O繁忙型作业(如多数的事务处理)。
## 短作业(进程)优先调度算法
短作业优先(SJF) 的调度算法。
短进程优先(SPF)的调度算法。
### 性能
- 与FCFS算法相比 ，短作业(进程)算法能有效降低作业（进程）的 平均等待时间、平均周转时间和带权平均周转时间、 提高系统的吞吐量。
- 对长作业不利，长作业可能长时间得不到调度
- 不能保证紧迫作业的及时处理，因为该算法不考虑作业的紧迫程度
- 作业长短根据用户的估计而定，故不一定能真正做到短作业优先
## 优先权调度算法
当使用优先权调度算法进行作业/进程调度时，系统将从后备队列中选择若干个优先权最高的作业/进程调入内存。
### 类型
- 非抢占式(nonpreemptive)优先权算法。进程一但得到处理机，则该进程便一直进行下去直到完成或由于某事件放弃处理机。
- 抢占式(preemptive)优先权调度算法。高优先权的进程可以抢占处理机，使正在执行的低优先权进程中断执行。在 unix中广泛采用抢占式
### 优先权类型
- 静态优先权：
      优先权在创建时确定，在进程的整个运行期间保持不变。决定静态优先权的依据：进程类型、进程对资源的需求、用户要求 
-  动态优先权：
         进程创建时获得的优先权，随进程的推进而改变
### 性能
- 无穷阻塞(indefinite blocking)或饥饿(starvation)问题: 低优先权进程长时间得不到调度。
- 老化(aging)技术:逐渐增加在系统中等待时间很长的进程的优先权。
## 时间片轮转调度算法
在早期的时间片轮转算法中，系统将所有的就绪进程按先来先服务的原则，排成一个队列，每次调度时把CPU分配给队首进程，并令其执行一个时间片，当时间片用完时，调度程序终止当前进程的执行，并将它送到就绪队列的队尾。 
### 时间片大小
- 系统对响应时间的要求
-  就绪队列中进程的数目
- 系统的处理能力
响应时间T=Nq
N:系统中的进程数；q: 时间片的大小。
1、（进程数一定）当系统要求的响应时间越小，时间片就越短；
2、(响应时间一定）系统允许的最大进程数越多，时间片也越短；
3、基本命令应该在一个时间片内执行完。
### 性能评价
   时间片轮转调度算法的性能在很大程度上依赖于时间的大小。在极端情况下，如果时间片很大，那么时间片轮转调度算法就与先来先服务算法一样；如果时间片很小，则进程需要经过多次上下文切换和进程调度，增加了CPU在进程切换和进程调度上的开销
## 多级队列调度算法
将就绪队列分成多个独立队列，根据进程的某些属性如内存大小、进程优先权或进程类型，进程会被永久地分配到一个队列。每个队列都有自己的调度算法。不同的队列优先权不同，调度算法也可能不同

- 设多个优先权不同的就绪队列
- 允许进程在多个不同的就绪队列间移动

就绪队列的数量
根据进程优先权确定进程应该进入哪个就绪队列的算法
用于确定进程何时转移到较高/低优先权队列的算法
用于确定进程在需要服务时应该进入哪个队列的算法
# 实时系统调度
## 基本条件
### 必要调度信息
1. 就绪时间。
2. 开始截止时间和完成截止时间
3. 处理时间
4. 资源要求
5. 优先级
### 系统处理能力强
### 采用抢占式调度机制
基于时钟中断的抢占式优先权调度算法
立即抢占的优先权调度算法
### 具有快速切换机制

1. 对外部中断的快速响应能力
2. 快速的任务分派能力

## 常用的几种实时调度算法

(1)最早截止时间优先EDF(Earliest Deadline First)
(2)最低松弛度优先LLF(Least Laxity First)

松弛度计算
    若当前时刻为t0,任务A必须在时刻t1之前执行完，任务A的执行时间为t，则在时刻t0进程A的松弛度=t1-t0-t
# 多处理机系统(MPS)
## 类型
(1)紧密耦合的多处理器系统和松弛耦合的多处理器系统
(2)对称多处理器系统和非对称多处理器系统
## 多处理机系统中的进程分配方式
   (1)对称多处理器系统中的进程分配方式

      ①静态分配
      ②动态分配
   (2)非对称MPS中的进程分配方式
## 进程(线程)调度方式
### 自调度
采用自调度的系统中设有一个公共的就绪队列，任何一个空闲的处理机都可以自己从该就绪队列中选取一个进程或者一个线程运行
#### 自调度算法的优点
  1. 易移植(从单机到多机)
  2. 有利于提高CPU的利用率

#### 自调度算法的缺点
  1. 瓶颈问题：整个系统中只有一个必须互斥访问的就绪队列。
  2. 低效性：CPU上的高速缓存的使用效率很低。
  3. 线程切换频繁。
### 成组调度

成组调度的优点
 1. 减少线程切换，改善系统性能。
 2. 减少调度开销。

成组调度中的时间分配
 1. 面向所有的应用程序平均分配处理机时间。
 2. 面向所有的线程平均分配处理机时间。 
### 专用处理机分配
在一个应用程序执行期间，专门为该应用程序分配一组处理机，每个线程一个，这组处理机供该应用程序专用，直至应用程序完成。
优点：
1、多处理机高度并行的系统中，处理机费用很低。
2、专用处理机分配完全避免了进程切换，大大加速了程序的完成 。

